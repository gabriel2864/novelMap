{% extends "base.html" %}
{% block content %}
  <section class="nz-section nz-reader-section">
    <div class="nz-reader-header">
      <div>
        <h1>{{ novel.title }}</h1>
        <p><em>by {{ novel.author_name }}</em></p>
        <h2>Chapter {{ chapter.chapter_number }}: {{ chapter.title }}</h2>
      </div>

      <div class="nz-reader-nav-buttons">
        <a href="{{ url_for('novel_detail', slug=novel.slug) }}" class="nz-nav-pill">
          ← Back to novel
        </a>

        {% if prev_chapter is not none %}
          <a
            href="{{ url_for('read_chapter', slug=novel.slug, chapter_number=prev_chapter) }}"
            class="nz-nav-pill"
          >
            ← Previous
          </a>
        {% endif %}
        {% if next_chapter is not none %}
          <a
            href="{{ url_for('read_chapter', slug=novel.slug, chapter_number=next_chapter) }}"
            class="nz-nav-pill nz-nav-pill-primary"
          >
            Next →
          </a>
        {% endif %}
      </div>
    </div>

    <article class="nz-reader-content">
      {# For now we treat content as plain text. Later, if you store HTML, use |safe. #}
      <p style="white-space: pre-line;">
        {{ chapter.content }}
      </p>
    </article>

    <div class="nz-reader-footer-nav">
      {% if prev_chapter is not none %}
        <a
          href="{{ url_for('read_chapter', slug=novel.slug, chapter_number=prev_chapter) }}"
          class="nz-nav-pill"
        >
          ← Previous chapter
        </a>
      {% endif %}
      {% if next_chapter is not none %}
        <a
          href="{{ url_for('read_chapter', slug=novel.slug, chapter_number=next_chapter) }}"
          class="nz-nav-pill nz-nav-pill-primary"
        >
          Next chapter →
        </a>
      {% else %}
        <span class="nz-end-of-book">End of novel</span>
      {% endif %}
    </div>
  </section>
{% endblock %}
